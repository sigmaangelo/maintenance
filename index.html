<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Enter Password</title>
</head>

<body style="background:black;color:#0f0;font-family:monospace;text-align:center;padding-top:100px;">

<div id="cloakScreen">
  <h1>PRESS TO CLOAK</h1>
  <br>
  <button onclick="cloak()">CLOAK</button>
</div>

<div id="loginScreen" style="display:none;">
  <h1>ENTER PASSWORD</h1>

  <input id="pass" type="password" placeholder="Password">
  <br><br>
  <button onclick="login()">ENTER</button>

  <p id="msg"></p>
</div>

<script>
  const PASSWORD = "1234"; // CHANGE THIS

  function login() {
    const pass = document.getElementById("pass").value;

    if (pass === PASSWORD) {
      location.href = "/games/";
    } else {
      document.getElementById("msg").textContent = "Wrong password";
    }
  }

  function cloak() {

    // Fullscreen
    if (document.documentElement.requestFullscreen) {
      document.documentElement.requestFullscreen();
    }

    // Grab current page HTML
    const page = document.documentElement.outerHTML;

    // Change URL to about:blank and rewrite page
    const win = window.open("about:blank", "_self");
    win.document.open();
    win.document.write(page);
    win.document.close();

    // After cloak, reveal password input
    setTimeout(() => {
      win.document.getElementById("cloakScreen").style.display = "none";
      win.document.getElementById("loginScreen").style.display = "block";
    }, 50);
  }
</script>

</body>
</html>
